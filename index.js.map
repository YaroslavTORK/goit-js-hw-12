{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '52822866-647b6b4c94b7d4074c4dcbe1c'; \n\nconst api = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n});\n\nexport async function getImagesByQuery(query, page) {\n const { data } = await api.get('/', {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 15,\n      },\n    })\n  return data;\n}\n\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst onLoadMore = document.querySelector(\".js-load-more\");\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <ul class=\"info\">\n          <li><b>Likes:</b> ${likes}</li>\n          <li><b>Views:</b> ${views}</li>\n          <li><b>Comments:</b> ${comments}</li>\n          <li><b>Downloads:</b> ${downloads}</li>\n        </ul>\n      </li>`\n    )\n    .join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryEl.innerHTML = '';\n}\n\nexport function showLoader() {\n  loaderEl.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  loaderEl.classList.add('is-hidden');\n}\n\nexport function showLoadBtn() {\n  onLoadMore.classList.remove('is-hidden');\n}\n\nexport function hideLoadBtn() {\n  onLoadMore.classList.add('is-hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, hideLoadBtn, showLoadBtn } from './js/render-functions.js';\n\nconst formEl = document.querySelector('.form');\nconst onLoadMore = document.querySelector(\".js-load-more\");\n\nlet currentQuery = '';\nlet page = 1;\nconst PER_PAGE = 15;\nlet totalHits = 0;\n\n\nformEl.addEventListener('submit', onSearchSubmit);\nonLoadMore.addEventListener(\"click\", loadMoreFn)\n\nfunction loadMoreFn() {\n  page += 1;\n  \n  fetchPage().then(() => {\n    const firstCard = document.querySelector('.gallery-item');\n    if (!firstCard) return;\n    const { height } = firstCard.getBoundingClientRect();\n    window.scrollBy({ top: height * 2, behavior: 'smooth' });\n  });\n}\n\nfunction onSearchSubmit(e) {\n  e.preventDefault();\n  const query = formEl.elements['search-text'].value.trim();\n  if (!query) {\n    iziToast.warning({ message: 'Please enter a search query.', position: 'topRight' });\n    return;\n  }\n\n  currentQuery = query;\n  page = 1;\n  totalHits = 0;\n  hideLoadBtn();\n  clearGallery();\n  fetchPage(); \n}\n\nasync function fetchPage() {\n  showLoader();\n  try {\n    const data = await getImagesByQuery(currentQuery, page);\n\n    if (page === 1) totalHits = data.totalHits;\n\n    if (!data.hits?.length) {\n      if (page === 1) {\n        iziToast.info({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight'\n        });\n      }\n      hideLoadBtn();\n      return;\n    }\n    createGallery(data.hits);\n\n    const loadedSoFar = page * PER_PAGE;\n    if (loadedSoFar < totalHits) {\n      showLoadBtn();\n    } else {\n      hideLoadBtn();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (err) {\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n  \n\n"],"names":["API_KEY","api","axios","getImagesByQuery","query","page","data","galleryEl","loaderEl","onLoadMore","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadBtn","hideLoadBtn","formEl","currentQuery","PER_PAGE","totalHits","onSearchSubmit","loadMoreFn","fetchPage","firstCard","height","e","iziToast","_a"],"mappings":"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"}